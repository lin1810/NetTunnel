ARG BASE_IMAGE='eclipse-temurin:17-jre-jammy'
FROM $BASE_IMAGE
ARG JAVA_OPTS
ARG BASE_PATH=/NT
ARG CONFIG_PATH=$BASE_PATH/config
ARG CERT_PATH=$CONFIG_PATH

WORKDIR $BASE_PATH
ENV JAVA_OPTS=$JAVA_OPTS
ENV BASE_PATH=$BASE_PATH
ENV CONFIG_PATH=$CONFIG_PATH
ENV CERT_PATH=$CERT_PATH
COPY . .
RUN sh -c 'mkdir -p $CONFIG_PATH'
VOLUME $CONFIG_PATH
ENTRYPOINT [ "bash", "./entrypoint.sh" ]